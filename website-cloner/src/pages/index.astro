---
import Layout from "../components/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { loadWebsiteData, getImages } from "../utils/data-loader";

const data = await loadWebsiteData();
const firstPage = data.pages[0];
const images = await getImages();
---

<Layout title={firstPage?.structure.title} description={firstPage?.structure.meta.description}>
  <Header />
  
  <main class="main-content">
    {firstPage && (
      <div class="page-content">
        <div class="hero-section">
          <h1>{firstPage.structure.title}</h1>
          {firstPage.structure.meta.description && (
            <p class="description">{firstPage.structure.meta.description}</p>
          )}
        </div>
        
        {images.length > 0 && (
          <section class="images-section">
            <h2>Images</h2>
            <div class="images-grid">
              {images.slice(0, 6).map((img, i) => (
                img.localPath && (
                  <img 
                    src={`/${img.localPath}`} 
                    alt={img.alt || `Image ${i + 1}`}
                    loading="lazy"
                  />
                )
              ))}
            </div>
          </section>
        )}
        
        <section class="pages-section">
          <h2>Pages</h2>
          <ul class="pages-list">
            {data.structure.routes.map(route => (
              <li>
                <a href={route.path}>{route.title || route.path}</a>
              </li>
            ))}
          </ul>
        </section>
      </div>
    )}
  </main>
  
  <Footer />
</Layout>

<style>
  .main-content {
    min-height: calc(100vh - 200px);
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }
  
  .page-content {
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }
  
  .hero-section {
    text-align: center;
    padding: 3rem 0;
  }
  
  .hero-section h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
  }
  
  .description {
    font-size: 1.2rem;
    color: #666;
    max-width: 800px;
    margin: 0 auto;
  }
  
  .images-section h2,
  .pages-section h2 {
    font-size: 2rem;
    margin-bottom: 1.5rem;
  }
  
  .images-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }
  
  .images-grid img {
    width: 100%;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .pages-list {
    list-style: none;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
  }
  
  .pages-list li {
    padding: 1rem;
    background: #f5f5f5;
    border-radius: 8px;
  }
  
  .pages-list a {
    text-decoration: none;
    color: #0070f3;
    font-weight: 500;
  }
  
  .pages-list a:hover {
    text-decoration: underline;
  }
</style>
